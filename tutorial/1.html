<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="generator" content="ReText 4.1.2">
<title>1</title>
</head>
<body>
<h1>变量</h1>
<p>通常我们可以把Shell的变量认为是字符串类型，无需声明。</p>
<h2>变量赋值</h2>
<p>下面的代码给变量<code>color</code>赋值：</p>
<pre><code>color=red
</code></pre>
<p>注意，等号两边不能有空格。如果在等号两边添加了空格，<code>color</code>会被当做指令，从而发生错误。</p>
<p>如果要赋的值中间有空格，就必须使用引号，如：</p>
<pre><code>color="red color"
</code></pre>
<p>或者</p>
<pre><code>color='red color'
</code></pre>
<p>在这个例子中，双引号和单引号的表现没有区别，但是在其他情况下可能有所不同，这在下面会有讲解。</p>
<h2>变量使用</h2>
<p>Shell中要使用一个变量，需要在变量名前加上<code>$</code>符号，如：</p>
<pre><code>color="red color"
mycolor=$color
echo $mycolor
</code></pre>
<p>上述代码中，第一行给<code>color</code>变量赋值，第二行将<code>color</code>变量的值赋给<code>mycolor</code>变量，第三行输出<code>mycolor</code>变量的值。输出的结果为<code>red color</code>。</p>
<p>与上面代码等价的代码可以是：</p>
<pre><code>color="red color"
mycolor=“$color”
echo $mycolor
</code></pre>
<p>可以看到，双引号中的变量会被其值替代，输出的结果为<code>red color</code>。</p>
<p>而下面的代码的输出结果却与之不同：</p>
<pre><code>color="red color"
mycolor='$color'
echo $mycolor
</code></pre>
<p>这是因为单引号中的变量不会被其值替代，所以输出结果为<code>$color</code>。</p>
<p>在有些情况下，我们需要用<code>${var}</code>的形式来使用变量的值，比如：</p>
<pre><code>num=5
echo ${num}th
</code></pre>
<p>上面代码的输出结果是<code>5th</code>，如果改成下面的代码：</p>
<pre><code>num=5
echo $numth
</code></pre>
<p>shell就会输出numth变量的值，如果此前没有给其赋值，就会输出一个空行。</p>
<h2>获取变量相关信息的方法</h2>
<p>对于可以看成字符串的Shell变量，有一些方法可以获取相关信息：</p>
<h3>子串</h3>
<pre><code>color="red color"
echo ${color:2:6}
</code></pre>
<p>输出结果为<code>d colo</code>。</p>
<h3>字符串长度</h3>
<pre><code>color="red color"
echo ${#color}
</code></pre>
<p>输出结果为<code>9</code>。</p>
<h2>环境变量</h2>
<p>Shell中有一些环境变量，一般用大写字母命名。常用的环境变量有：</p>
<ul>
<li><code>$PATH</code>：寻找命令的目录</li>
<li><code>$IFS</code>：shell使用该环境变量分割输入 </li>
<li><code>$#</code>：参数个数</li>
<li><code>$0</code>：脚本名称</li>
</ul>
<h2>参数变量</h2>
<p>在执行shell脚本时，可能会传递给脚本一些参数，获取这些参数可以通过参数变量。常用的参数变量有：</p>
<ul>
<li><code>$*</code>：所有参数，使用<code>$IFS</code>分隔</li>
<li><code>$@</code>：所有参数，不使用<code>$IFS</code>分隔</li>
<li><code>$1</code>：第一个参数</li>
<li><code>$2</code>：第二个参数</li>
<li><code>$3</code>：第三个参数</li>
</ul>
<h2>数组</h2>
<p>下面的指令定义了数组：</p>
<pre><code>a=(0 1 2 3)
</code></pre>
<p>访问数组的某个元素：</p>
<pre><code>echo ${a[2]}
</code></pre>
<p>访问整个数组：</p>
<p>echo ${a[@]}</p>
<p>或者</p>
<pre><code>echo ${a[*]}
</code></pre>
<p>获取数组的长度：</p>
<pre><code>echo ${#a[@]}
</code></pre>
<h2>思考题</h2>
<p>请写一个名为<code>my.sh</code>的Shell脚本，其接受2个参数，并输出第2个参数和后缀“s”。</p>
<p>请执行<code>bash my.sh apple pear peach</code>。</p>
</body>
</html>
